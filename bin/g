#!/usr/bin/env bash
# 快速调试的程序

selected_program=1.out
selected_input_file=in

if [ -n "$1" ] && { [ "$1" = "c" ] || [ "$1" = "choose" ]; }; then
    selected_program=$(find . -maxdepth 1 -type f -name "*.out" | fzf \
        --height=~20% --layout=reverse --border=top \
        --border-label="choose program" --border-label-pos=4 \
        --ansi
    )
    # echo $selected_file

    selected_input_file=$(find . -maxdepth 1 -type f -name "*in*" | fzf \
        --height=~20% --layout=reverse --border=top \
        --border-label="choose input" --border-label-pos=4 \
        --ansi
    )
fi


# echo $selected_program
# echo $selected_input_file
cgdb $selected_program -- --ex "start <${selected_input_file}"


